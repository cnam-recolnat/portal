#-----------------------------------------------------------8<----------------------------------------------------------
# Base with SSH support
#-----------------------------------------------------------8<----------------------------------------------------------
FROM		tutum/debian-wheezy
MAINTAINER	Arie Benichou <arie.benichou@gmail.com>
#-----------------------------------------------------------8<----------------------------------------------------------
# System Tools
#-----------------------------------------------------------8<----------------------------------------------------------
RUN			apt-get update && apt-get dist-upgrade -y -q && \
			apt-get install -y -q \
				locate \
				nano \
		  		curl \
		  		wget \
		  		git \
				netcat \
				nmap \
		  		net-tools \
		  		lsof \
		  		rsync
#-----------------------------------------------------------8<----------------------------------------------------------
# etcd
#-----------------------------------------------------------8<----------------------------------------------------------
RUN			curl -L  https://github.com/coreos/etcd/releases/download/v2.0.0-rc.1/etcd-v2.0.0-rc.1-linux-amd64.tar.gz \
				-o etcd-v2.0.0-rc.1-linux-amd64.tar.gz && tar xzvf etcd-v2.0.0-rc.1-linux-amd64.tar.gz
#-----------------------------------------------------------8<----------------------------------------------------------
# Cleaning
#-----------------------------------------------------------8<----------------------------------------------------------
RUN			apt-get autoclean && apt-get autoremove
#-----------------------------------------------------------8<----------------------------------------------------------
# Indexing
#-----------------------------------------------------------8<----------------------------------------------------------
RUN			updatedb
#-----------------------------------------------------------8<----------------------------------------------------------
# Workspace
#-----------------------------------------------------------8<----------------------------------------------------------
ADD			./⁄/ /
#-----------------------------------------------------------8<----------------------------------------------------------
# Main
#-----------------------------------------------------------8<----------------------------------------------------------
EXPOSE 22 4001 7001
ENTRYPOINT  ["/root/main.sh"]
#-----------------------------------------------------------8<----------------------------------------------------------
